{"name":"Feature-surface","tagline":"Detect featured surfaces of unstructured meshed.","body":"# Introduction\r\nThis package has been created to automatically identify inlet and outlet of meshes. Such inlet/outlet are geometrically distinguished from other boundary surfaces. Specifically, they are encircled by a closed curve that has sharper normal change and inside area of the curve has more flattened surface. We call these boundaries _Feature Surfaces_. An example is both ends of a cylinder. Each end is a flat surface that is engulfed with a circle. The two end circles on a cylinder mesh have sharper normal vector change across their points. Figure [1](#figAAAexample) shows detection of two featured surfaces on a mesh model.\r\n\r\nThe _Feature Surface_ can be used either as a a plugin for ParaView, a filter in a VTK code or as a standalone application. The program accepts various cell types. Multiple file formats are supported as well. Common file formats are legacy `*.vtk` and binary `*.vtu` extensions.\r\n\r\n![An example of two separated featured surface detection on AAA mesh.](https://raw.github.com/ameli/feature-surface/master/doc/figures/AAA-4.png \"An example of two separated featured surface detection on AAA mesh.\")\r\n<a name=\"figAAAexample\"></a>\r\n\r\n# Build Source\r\nUser can build the code from source. You can obtain the source code from [github repository](https://github.com/ameli/feature-surface). Please install `git` package:\r\n\r\n    $ sudo apt-get install git\r\n\r\nThen, create a build directory and download the source code inside the build directory:\r\n\r\n    $ mkdir /tmp/FeatureSurface\r\n    $ cd /tmp/FeatureSurface\r\n    $ git clone git://github.com/ameli/feature-surface\r\n\r\nNow, build the code:\r\n\r\n    $ cmake .\r\n    $ make\r\n    $ sudo make install\r\n    $ cd ..\r\n    $ rm -r /tmp/feature-surface\r\n\r\nInstallation is system-wide for all users.\r\n\r\n# Program Usage\r\nYou can use the program either in terminal or as a ParaView plugin. Here are examples to use it in terminal:\r\n\r\n    $ featuresurface /input-path/inputfile.vtk outputfile.vtk\r\n\r\nFor help, use `-h`, for get program information use `-i` and for see the license, use `-l` options.\r\n\r\n    $ featuresurface -h\r\n    $ featuresurface -i\r\n    $ featuresurface -l\r\n\r\n# ParaView Plugin Usage\r\n<a name=\"secParaview\"></a>\r\n\r\nAfter loading the plugin in ParaView, you can use the filter in `Filter` menu under `Extensions`. Figures [2](#figParaview) shows how to apply the plugin inside ParaView. \r\n\r\n![Using the plugin in ParaView](https://raw.github.com/ameli/feature-surface/master/doc/figures/Paraview.png \"Using the plugin in ParaView\")\r\n<a name=\"figParaview\"></a>\r\n\r\nFigure [3](#figoptions) illustrated the options that can be set in ParaView for this filter. Filter has the following options:\r\n* __Feature angle__ is the threshold angle degree for which the edges are detected. Smaller feature angle is less restrictive.\r\n* **Surface color** can be one of the followings:\r\n    * _Body color_: Assigns the color _0_ to all featured surface points. This is the same color as body.\r\n    * _Mono color_: Assigns color _1_ for all features surface points.\r\n    * _Poly color_: For each group of points in a features surface area, it assigns an integer, starting from _1_. Thus the _n_-th features surface has the color _n_.\r\n* __Edge color__ can be one of the followings:\r\n    * _Body color_: Assigns the color _0_ to all edge points. This is the same color as body.\r\n    * _Mono color_: Assigns color _1_ for all edge points.\r\n    * _Surface color_: Assigns the color of the surface that the edge is belonging to.\r\n    * _Opposite Surface color_: Assigns opposite of the color of surface that edge is belonging to. For instants, if the surface has color _n_, then its edge has color _-n_.\r\n\r\n![Left: Options for surface color mode. Right: Options for Edge color mode.](https://raw.github.com/ameli/feature-surface/master/doc/figures/options.jpg \"Left: Options for surface color mode. Right: Options for Edge color mode.\")\r\n<a name=\"figoptions\"></a>\r\n\r\n# Robustness of Algorithm\r\nThe algorithm that is used for this filter is robust in variety of ways. Such robustness was gained by both _geometrical_ and _topological_ checks on edge extraction. The following are a brief description.\r\n\r\n## Geometrical Checks\r\nFirst, the algorithm is not sensitive on _Edge Angle_. Majority of function were used to eliminate this dependency, so a broad range of edge angle can lead to reasonable edge detection. Figure [4](#figgeometricalcheck) shows two violations of edge angles in critical situations. In the left highlighted spot, edge angle is small, and an rudimentary search might not detect the edge and featured surface at all. User might lower the edge angle threshold in settings, but it comes with the cost of detecting some edges that are not belong to an interesting featured surface. For instance, the right highlighted spot has a large edge angle but it is not considered as inlet or outlet. However a simple algorithm might detect the edge and try to extract a spurious feature surface. By using a geometrical checks we eliminate such spurious edges.\r\n\r\n![Left and right spotlights are two angles that violates with edge angle threshold.](https://raw.github.com/ameli/feature-surface/master/doc/figures/AAA-5-1.jpg \"Left and right spotlights are two angles that violates with edge angle threshold.\")\r\n<a name=\"figgeometricalcheck\"></a>\r\n\r\n## Topological Checks\r\nA more basic issue with edge extraction is the topology of edge itself. Some edges are not closed curve, some are having more than two connectivities at each points, or multiple closed curves are sharing a set of common points. Few of these unusual edges are not accepted as an edge for a featured surface, and some needs trimming of excessive points. Since excessive points are not known priori, all possible routes on the edges should be checked for finding a _nice curve_ that can be a candidate for a featured surface. Figure [5](#figspuriousedge) illustrate such spurious edges that should take out of results. [This listing](#listoutputprogramaortic) is the program output applied on data in figure [5](#fig:spurious-edge).\r\n\r\n![An example of spurious edge that does not construct a featured surface.](https://raw.github.com/ameli/feature-surface/master/doc/figures/AAA-6-1.jpg \"An example of spurious edge that does not construct a featured surface.\")\r\n<a name=\"figspuriousedge\"></a>\r\n\r\nOutput of program <a name=\"list:output-program-aortic\"></a>\r\n    $ ./FeatureSurface \r\n    \r\n    Closed polygon found. Number of points: 21\r\n    Closed polygon found. Number of points: 48\r\n    Closed polygon found. Number of points: 60\r\n    Closed polygon found. Number of points: 118\r\n    Closed polygon found. Number of points: 37\r\n    Closed polygon found. Number of points: 18\r\n    \r\n    Fatal Point: 19, Number of connectivities: 3\r\n    Fatal Point: 19, Number of connectivities: 3\r\n    Fatal Point: 33, Number of connectivities: 3\r\n    Fatal Point: 32, Number of connectivities: 1\r\n    Fatal Point: 39, Number of connectivities: 1\r\n    Fatal Point: 64, Number of connectivities: 1\r\n    Total number of closed polygons: 6\r\n    \r\n    Closed Edge: 1,\t Surface points found: 39\r\n    Closed Edge: 2,\t Surface points found: 206\r\n    Closed Edge: 3,\t Surface points found: 315\r\n    Closed Edge: 4,\t Surface points found: 1270\r\n    Closed Edge: 5,\t Surface points found: 120\r\n    Closed Edge: 6,\t Surface points found: 23\r\n\r\n## Orientating Edges\r\nAn important issue after extracting a candidate edge curve is to find an appropriate orientation on edge; that is, finding which side is interior or exterior of the closed curve. Topologically, both sides ca be interior since a smooth homotopy can make both side identical. Rather using topologically distinct sides, we use geometrically distinct regions. We define an interior side where the surface is tend to be more flattened. This assumption is natural in inlet and outlets of computational meshes. The algorithm that is used in the filter can decide which surface to be interior.\r\n\r\nHowever, in rare cases, due to incorrect meshing or unusual cases the interior and exterior surfaces of an edge can be related with a path other than the edge itself. The current code can identify such cases and avoid colorizing the while domain. This feature makes the algorithm very robust in colorizing domains correctly.\r\n\r\n# Examples\r\nThe filter's performance has been tested on two mesh models on both Linux and Mac OS X operating systems using both command line and ParaView plugin. Figure [6](#figAAAmesh) shows the application of filter on AAA mesh model. The mesh has 11 inlet and outlets that all of them has been detected by the filter. With no surprise, the performance was not sensitive to selecting the Edge angle, thus all features identified without including any noisy edge or non-interesting edges. Figure [7](#figAorticmesh) illustrates the application of the filter on Aortic mesh model, which all 6 inlet or outlets were detected. Since the algorithm _re-uses_ all of its computed data during process at each iterative search on edges, the algorithm is fast. It takes only 4 or 5 seconds for a million element Aortic mesh to finish the computation.\r\n\r\n![AAA mesh with 11 featured surface detected.](https://raw.github.com/ameli/feature-surface/master/doc/figures/AAA-mesh.jpg \"AAA mesh with 11 featured surface detected.\")\r\n<a name=\"figAAAmesh\"></a>\r\n\r\nAs described in [this section](#secParaview), the plugin has options to colorize the edges and/or surfaces in multiple ways. Edges and their corresponding surfaces can be colorized with the same color, body color or independently.\r\n\r\n![Aortic mesh with 6 featured surface detected.](https://raw.github.com/ameli/feature-surface/master/doc/figures/Aortic-mesh.jpg \"Aortic mesh with 6 featured surface detected.\")\r\n<a name=\"fig:Aortic-mesh\"></a>\r\n\r\n#  License \r\n\r\nCopyright 2013 Siavash Ameli\r\n\r\nThis source code is provided _as-is_, without any express or implied warranty. In no event will the author be held liable for any damages arising from the use of this software.\r\n\r\nPermission is granted to anyone to use this software for non commercial purpose, to alter it and redistribute it freely, subject to the following restrictions:\r\n\r\n* The origin of this source code must not be misrepresented; you must not claim that you wrote the original source code. \r\n* You may modify or alter the source code at your own risk, provided that such modifications are extensively commented. Altered source versions must not be misrepresented as being the original source code.\r\n* Source code may not be redistributed in any way. You may distribute the target binary for non-commercial purposes.\r\n* If you use this source code in a non-commercial product, an acknowledgment in the product documentation would be appreciated.\r\n* This notice may not be removed or altered from any source distribution.\r\n\r\n# Bug Report\r\nAny bug reports and comments are appreciated. You may report bugs in [github](https://github.com/ameli/feature-surface), [Launchpad](https://bugs.launchpad.net/~ameli) or send email.\r\n\r\n# Acknowledgement\r\n\r\nThis work was supported by the National Science Foundation, award number 1047963.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}